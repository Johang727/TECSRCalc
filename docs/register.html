<html>

<head>
<meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
<meta http-equiv="Content-Language" content="en-us">
<title>Register | SR Calculator</title>
<!--mstheme--><link rel="stylesheet" type="text/css" href="themes/slate/slat1011.css"><meta name="Microsoft Theme" content="slate 1011">
<meta name="Microsoft Border" content="tlb, default">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Space+Mono&display=swap" rel="stylesheet">
<link rel="icon" href="images/icon.png">
</head>

<body>
<p>&nbsp;</p>
    
<!--msnavigation--><table border="0" cellpadding="0" cellspacing="0" width="100%"><tr><td>


</td></tr><!--msnavigation--></table><!--msnavigation--><table dir="ltr" border="0" cellpadding="0" cellspacing="0" width="100%"><tr><td valign="top" width="1%">


</td><td valign="top" width="24"></td><!--msnavigation--><td valign="top">

<div align="center">
    <center>
    <table border="0" width="100%" cellpadding="5">
        <tr>
            <td width="330" style="border-style: none; border-width: medium" align="left" valign="top">
            <b><font size="5">Make an account:</font></b><p>                
            
            <p><b>Enter username :</b> <input type="text" id="usr" name="username" size="40"></p>

            <input type="button" value="Create account!" name="register" onclick="register()">

            <p style="color:red"><span id="err-container"></span></p>

            <p><span id="usr-container"></span></p>
            <p><span id="psw-container"></span></p>
            <p style="color:red"><span id="txt-container"></span></p>



        </tr>
    </table>
    </center></div>
<div align="center">
    <center></center></div>



<script>
    const API_URL = 'https://api.tecsrcalc.org';

    async function register() {
        const usr = document.getElementById("usr").value;
        const err_container = document.getElementById("err-container");
        const usr_container = document.getElementById("usr-container");
        const psw_container = document.getElementById("psw-container");
        const txt_container = document.getElementById("txt-container");

        try {
            const response = await fetch(`${API_URL}/register`, {
                method: "POST",
                headers: {
                    "Content-Type": "application/json"
                },
                body: JSON.stringify({usr})
            });

            if (!response.ok) { throw new Error(`Server error: ${response.status}`) };
            const data = await response.json();

            if (data.status === "error") {
                err_container.innerText = `${data.message}`;
            } else {
                usr_container.innerText = `Username: ${data.username}`
                psw_container.innerText = `Password: ${data.password}`
                txt_container.innerText = `Save this! It won't be shown again, and I can't see it either!`
            }

        } catch (error) {
            console.error("Calculation failed:", error);
            err_container.innerText = "Something went wrong, ruh roh";
        }
    }

</script>


<!--msnavigation--></td></tr><!--msnavigation--></table><!--msnavigation--><table border="0" cellpadding="0" cellspacing="0" width="100%"><tr><td>


<p>&nbsp;</p>
<hr align="left">

<p align="left"><small>
<nobr><A HREF="index.html" TARGET="" STYLE="text-decoration: none;">Home</A></nobr> ||  <nobr><A HREF="about.html" TARGET="" STYLE="text-decoration: none;">About</A></nobr>
</small></p>
</td></tr><!--msnavigation--></table></body>

</html>
